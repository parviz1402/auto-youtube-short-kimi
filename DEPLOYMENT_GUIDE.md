# ğŸš€ Deployment Guide - Auto YouTube Short System

This guide will walk you through setting up the complete automated YouTube Shorts system.

## ğŸ“‹ Prerequisites

1. **GitHub Account** - For repository and Actions
2. **Google Cloud Account** - For YouTube Data API
3. **API Keys** - OpenAI, Pexels, ElevenLabs (optional)

## ğŸ”§ Step-by-Step Setup

### Step 1: Create GitHub Repository

1. Go to https://github.com/new
2. Create repository named: `auto-youtube-short-kimi`
3. Make it private (recommended for API keys)
4. Don't initialize with README (we'll push our own)

### Step 2: Upload Files to Repository

Since we can't initialize git in this environment, manually upload all files:

1. **Create these files in your repository:**
   - `package.json`
   - `generate-video.js`
   - `youtube_get_refresh_token.js`
   - `README.md`
   - `.env.example`
   - `placeholder.jpg`
   - `.github/workflows/auto-create-short.yml`

2. **Directory structure should be:**
```
auto-youtube-short-kimi/
â”œâ”€â”€ .github/workflows/auto-create-short.yml
â”œâ”€â”€ generate-video.js
â”œâ”€â”€ youtube_get_refresh_token.js
â”œâ”€â”€ package.json
â”œâ”€â”€ README.md
â”œâ”€â”€ .env.example
â””â”€â”€ placeholder.jpg
```

### Step 3: Set Up API Keys

#### 1. OpenAI API Key
- Go to https://platform.openai.com/api-keys
- Create new API key
- **Cost**: ~$0.01-0.05 per video generation

#### 2. Pexels API Key
- Go to https://www.pexels.com/api/
- Register and get free API key
- **Cost**: Free with rate limits

#### 3. ElevenLabs API Key (Optional)
- Go to https://elevenlabs.io/
- Create account and get API key
- **Cost**: Free tier available, better voice quality

#### 4. YouTube Data API Setup

1. Go to https://console.cloud.google.com/
2. Create new project or select existing
3. Enable "YouTube Data API v3"
4. Go to APIs & Services > Credentials
5. Create OAuth client ID:
   - Application type: Web application
   - Name: "Auto YouTube Short"
   - Authorized redirect URIs: `http://localhost:3000/callback`
6. Copy Client ID and Client Secret

### Step 4: Get YouTube Refresh Token

**Method 1: Local Setup**
```bash
# Clone your repository
git clone https://github.com/YOUR_USERNAME/auto-youtube-short-kimi.git
cd auto-youtube-short-kimi

# Install dependencies
npm install

# Set environment variables temporarily
export YT_CLIENT_ID="your_client_id"
export YT_CLIENT_SECRET="your_client_secret"

# Run token generation
npm run get-token
```

**Method 2: Manual OAuth Flow**
1. Use the OAuth URL generated by the script
2. Authorize the application
3. Copy the refresh token

### Step 5: Set GitHub Secrets

Go to your repository: Settings > Secrets and variables > Actions

Add these secrets:

| Secret Name | Description | Example |
|-------------|-------------|---------|
| `OPENAI_API_KEY` | OpenAI API Key | `sk-...` |
| `PEXELS_API_KEY` | Pexels API Key | `your_pexels_key` |
| `ELEVENLABS_API_KEY` | ElevenLabs API Key (optional) | `your_elevenlabs_key` |
| `DEFAULT_VOICE_ID` | ElevenLabs Voice ID (optional) | `pNInz6obpgDQGcFmaJgB` |
| `YT_CLIENT_ID` | YouTube OAuth Client ID | `your_client_id.apps.googleusercontent.com` |
| `YT_CLIENT_SECRET` | YouTube OAuth Client Secret | `your_client_secret` |
| `YT_REFRESH_TOKEN` | YouTube OAuth Refresh Token | `your_refresh_token` |

### Step 6: Test the System

#### Local Test
```bash
# Install dependencies
npm install

# Create .env file
cp .env.example .env
# Edit .env with your API keys

# Test video generation
npm run generate
```

#### GitHub Actions Test
1. Go to Actions tab in your repository
2. Select "Auto Create YouTube Short" workflow
3. Click "Run workflow" > "Run workflow"
4. Monitor the execution

## ğŸ“Š Cost Estimates

### Monthly Costs (Daily Videos)

| Service | Cost per Video | Monthly Cost |
|---------|---------------|--------------|
| OpenAI API | ~$0.01-0.05 | ~$0.30-1.50 |
| ElevenLabs TTS | ~$0.001-0.01 | ~$0.03-0.30 |
| Pexels API | Free | Free |
| YouTube API | Free | Free |
| GitHub Actions | Free (2000 min/month) | Free |
| **Total** | **~$0.011-0.06** | **~$0.33-1.80** |

## ğŸ” Monitoring and Maintenance

### GitHub Actions Monitoring
- Check Actions tab for workflow runs
- Review logs for any errors
- Download artifacts to inspect generated files

### API Usage Monitoring
- **OpenAI**: Check usage at https://platform.openai.com/usage
- **ElevenLabs**: Monitor at https://elevenlabs.io/app/account
- **YouTube**: Check quota at https://console.cloud.google.com/

### Error Handling
- All errors are logged to `error.log`
- Failed runs create artifacts with debug information
- Set up Slack notifications (optional) in workflow

## ğŸ› ï¸ Customization

### Changing Video Topics
Edit the prompts in `generate-video.js`:
```javascript
const prompt = "Generate 20 Persian titles for construction/maintenance tips...";
```

### Modifying Video Style
- Edit FFmpeg parameters in `generate-video.js`
- Change thumbnail generation in `generateThumbnail()` function
- Modify video length by adjusting duration parameters

### Schedule Changes
Edit the cron expression in `.github/workflows/auto-create-short.yml`:
```yaml
schedule:
  # Daily at 12:00 PM UTC
  - cron: '0 12 * * *'
```

## ğŸš¨ Troubleshooting

### Common Issues

1. **"No refresh token received"**
   - Revoke app access in Google Account
   - Run token generation again
   - Ensure correct OAuth setup

2. **Video generation fails**
   - Check API key validity
   - Verify FFmpeg installation
   - Review logs for specific errors

3. **YouTube upload fails**
   - Check API quotas
   - Verify OAuth credentials
   - Ensure channel is verified

4. **Image download fails**
   - Check Pexels API key
   - Verify rate limits
   - Uses placeholder images as fallback

### Debug Mode
Enable debug logging:
```bash
DEBUG=true npm run generate
```

## ğŸ“ˆ Scaling Up

### Multiple Channels
1. Create separate repositories
2. Use different API keys
3. Modify content prompts for each channel

### Increased Frequency
- Change GitHub Actions schedule
- Monitor API rate limits
- Consider paid API tiers for higher limits

## ğŸ” Security Best Practices

1. **Never commit API keys** - Always use environment variables
2. **Use GitHub Secrets** - Never hardcode tokens
3. **Rotate keys regularly** - Update secrets periodically
4. **Monitor usage** - Watch for unexpected API consumption
5. **Limit permissions** - Use minimal required API scopes

## ğŸ“ Support

If you encounter issues:
1. Check the logs in GitHub Actions
2. Review the troubleshooting section
3. Create an issue in your repository
4. Check API service status pages

## ğŸ‰ Success Indicators

- âœ… GitHub Actions workflow runs successfully
- âœ… Video appears on your YouTube channel
- âœ… No errors in workflow logs
- âœ… Thumbnail and description are correct
- âœ… Video plays properly on YouTube

---

**Congratulations!** ğŸ‰ You now have a fully automated YouTube Shorts system that will create and upload Persian construction tips daily.